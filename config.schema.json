{
  "pluginAlias": "3EMEnergyMeter",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Shelly 3EM Energy Meter Platform",
  "footerDisplay": "This accessory supports HomeKit/EVE energy monitoring with Shelly 3EM.",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "3EM Energy Meter"
      },
      "devices": {
        "title": "Shelly Devices",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "title": "Device Name",
              "type": "string",
              "default": "Main Meter"
            },
            "host": {
              "title": "IP Address / Hostname",
              "type": "string",
              "description": "The IP address of your Shelly 3EM device."
            },
            "auth": {
              "title": "Authentication (Optional)",
              "type": "object",
              "properties": {
                "user": {
                  "title": "Username",
                  "type": "string"
                },
                "pass": {
                  "title": "Password",
                  "type": "string"
                }
              }
            },
            "use_em": {
              "title": "Use EM Mode",
              "type": "boolean",
              "default": true,
              "description": "Must be enabled for single-phase Shelly EM."
            }
          },
          "required": ["name", "host"]
        }
      ]
    },
    "required": ["name", "devices"]
  }
}