{
  "pluginAlias": "3EMEnergyMeter",
  "pluginType": "accessory",
  "headerDisplay": "Shelly 3EM Energy Meter Plugin",
  "footerDisplay": "This accessory will only be supported in the third-party Homekit app EVE.",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Name",
        "type": "string"
      },
      "ip": {
        "title": "Shelly IP address",
        "type": "string"
      },
      "auth": {
        "title": "Auth (optional)",
        "type": "object",
        "properties": {
          "user": { "title": "Username", "type": "string" },
          "pass": { "title": "Password", "type": "string" }
        }
      },
      "timeout": {
        "title": "HTTP timeout (ms)",
        "type": "integer",
        "default": 5000
      },
      "update_interval": {
        "title": "Update interval (ms)",
        "type": "integer",
        "default": 10000
      },
      "use_em": {
        "title": "Use Shelly EM device (single/double channel EM)",
        "type": "boolean",
        "default": false
      },
      "use_em_mode": {
        "title": "EM mode (0 = combine ch1+ch2 / 1 = channel1 / 2 = channel2)",
        "type": "integer",
        "default": 0,
        "minimum": 0,
        "maximum": 2
      },
      "negative_handling_mode": {
        "title": "Negative handling (0 = zero negatives, 1 = absolute values)",
        "type": "integer",
        "default": 0,
        "minimum": 0,
        "maximum": 1
      },
      "use_pf": {
        "title": "Use Power Factor when calculating current (pf)",
        "type": "boolean",
        "default": false
      },
      "debug_log": {
        "title": "Enable debug logging",
        "type": "boolean",
        "default": false
      },
      "serial": {
        "title": "Accessory serial number (unique required for fakegato-history)",
        "type": "string"
      }
    },
    "required": ["name","ip"]
  }
}
