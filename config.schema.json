{
  "pluginAlias": "3EMEnergyMeter",
  "pluginType": "accessory",
  "singular": true,
  "headerDisplay": "Shelly 3EM Energy Meter Plugin",
  "footerDisplay": "This accessory will only be supported in the third-party HomeKit app EVE.",
  "schema": {
    "type": "object",
    "properties": {
      "accessories": {
        "title": "Accessories",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "title": "Name",
              "type": "string",
              "default": "Energy Meter",
              "required": true
            },
            "ip": {
              "title": "IP Address",
              "type": "string",
              "default": "127.0.0.1",
              "required": true,
              "format": "ipv4"
            },
            "auth": {
              "title": "Shelly 3EM Web Interface Authentication",
              "type": "object",
              "properties": {
                "user": {
                  "title": "Username",
                  "type": "string",
                  "default": "",
                  "required": false
                },
                "pass": {
                  "title": "Password",
                  "type": "string",
                  "default": "",
                  "required": false
                }
              }
            },
            "timeout": {
              "title": "Request Timeout",
              "type": "integer",
              "default": 5000,
              "required": true,
              "minimum": 1000,
              "maximum": 30000
            },
            "update_interval": {
              "title": "Update Interval",
              "type": "integer",
              "default": 10000,
              "required": true,
              "minimum": 1000,
              "maximum": 60000,
              "description": "Update Interval should be higher than Request Timeout."
            },
            "use_em": {
              "title": "Use Shelly EM device.",
              "type": "boolean",
              "default": false,
              "required": true,
              "description": "Set this to true if you’re using the 3EM device."
            },
            "use_em_mode": {
              "title": "Shelly EM operating mode (0=combine,1=channel1,2=channel2)",
              "type": "integer",
              "default": 0,
              "required": true,
              "minimum": 0,
              "maximum": 2,
              "description": "Used only when 'use_em' is true."
            },
            "negative_handling_mode": {
              "title": "Negative Values handling mode (0=zero Negative Values,1=absolute Negative Values)",
              "type": "integer",
              "default": 0,
              "required": true,
              "minimum": 0,
              "maximum": 1,
              "description": "How negative values (power return) are handled."
            },
            "use_pf": {
              "title": "Use Power Factor (pf) when calculating Total Ampere",
              "type": "boolean",
              "default": false,
              "required": true
            },
            "debug_log": {
              "title": "Enable Debug Logging",
              "type": "boolean",
              "default": false,
              "required": true
            },
            "add_channel_accessory": {
              "title": "Add channel-specific accessory",
              "type": "boolean",
              "default": false,
              "required": false,
              "description": "If enabled, plugin will expose an additional accessory for a single channel."
            },
            "channel": {
              "title": "Channel for the additional accessory",
              "type": "integer",
              "default": 2,
              "required": false,
              "minimum": 1,
              "maximum": 3,
              "description": "Select emeter channel (1-based) for the additional accessory."
            },
            "serial": {
              "title": "Shelly 3EM Device Serial",
              "type": "string",
              "default": "123456789012345",
              "required": true,
              "minLength": 5,
              "maxLength": 16,
              "description": "Must be unique across Homebridge; can use real serial."
            }
          }
        }
      },
            "name": {
        "title": "Name",
        "type": "string",
        "default": "Energy Meter",
        "required": true
      },
      "ip": {
        "title": "IP Address",
        "type": "string",
        "default": "127.0.0.1",
        "required": true,
        "format": "ipv4"
      },
      "auth": {
        "title": "Shelly 3EM Web Interface Authentication",
        "type": "object",
        "properties": {
          "user": {
            "title": "Username",
            "type": "string",
            "default": "",
            "required": false
          },
          "pass": {
            "title": "Password",
            "type": "string",
            "default": "",
            "required": false
          }
        }
      },
      "timeout": {
        "title": "Request Timeout",
        "type": "integer",
        "default": 5000,
        "required": true,
        "minimum": 1000,
        "maximum": 30000
      },
      "update_interval": {
        "title": "Update Interval",
        "type": "integer",
        "default": 10000,
        "required": true,
        "minimum": 1000,
        "maximum": 60000,
        "description": "Update Interval should be higher than Request Timeout."
      },
      "use_em": {
        "title": "Use Shelly EM device.",
        "type": "boolean",
        "default": false,
        "required": true,
        "description": "Set this to true if you’re using the 3EM device."
      },
      "use_em_mode": {
        "title": "Shelly EM operating mode (0=combine,1=channel1,2=channel2)",
        "type": "integer",
        "default": 0,
        "required": true,
        "minimum": 0,
        "maximum": 2,
        "description": "Used only when 'use_em' is true."
      },
      "negative_handling_mode": {
        "title": "Negative Values handling mode (0=zero Negative Values,1=absolute Negative Values)",
        "type": "integer",
        "default": 0,
        "required": true,
        "minimum": 0,
        "maximum": 1,
        "description": "How negative values (power return) are handled."
      },
      "use_pf": {
        "title": "Use Power Factor (pf) when calculating Total Ampere",
        "type": "boolean",
        "default": false,
        "required": true
      },
      "debug_log": {
        "title": "Enable Debug Logging",
        "type": "boolean",
        "default": false,
        "required": true
      },
      "add_channel_accessory": {
        "title": "Add channel-specific accessory",
        "type": "boolean",
        "default": false,
        "required": false,
        "description": "If enabled, plugin will expose an additional accessory for a single channel."
      },
      "channel": {
        "title": "Channel for the additional accessory",
        "type": "integer",
        "default": 2,
        "required": false,
        "minimum": 1,
        "maximum": 3,
        "description": "Select emeter channel (1-based) for the additional accessory."
      },
      "serial": {
        "title": "Shelly 3EM Device Serial",
        "type": "string",
        "default": "123456789012345",
        "required": true,
        "minLength": 5,
        "maxLength": 16,
        "description": "Must be unique across Homebridge; can use real serial."
      }
    }
  }
}